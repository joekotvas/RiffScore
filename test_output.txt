
> riffscore@1.0.0-alpha.5 test
> jest

FAIL src/__tests__/MultiSelect.test.tsx
  ● Multi-Note Selection Integration › Cmd+Click selects multiple notes

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/MultiSelect.test.tsx:85:11)

  ● Multi-Note Selection Integration › Add Note -> Cmd+Click -> Transpose flow

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/MultiSelect.test.tsx:120:11)

FAIL src/__tests__/Smoke.test.tsx
  ● ScoreEditor Smoke Test › renders without crashing and handles clef clicks

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Smoke.test.tsx:63:11)

FAIL src/__tests__/Interaction.test.tsx
  ● ScoreEditor Interactions › User can add a note by clicking on a measure

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:62:11)

  ● ScoreEditor Interactions › User can insert a note between existing notes

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:108:11)

  ● ScoreEditor Interactions › User can delete a selected note

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:146:11)

  ● ScoreEditor Interactions › Cursor auto-advances after APPENDing a note

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:200:11)

  ● ScoreEditor Interactions › Cursor does NOT auto-advance after INSERTing a note

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:237:11)

  ● ScoreEditor Interactions › User can multi-select notes with CMD+Click

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:267:11)

  ● ScoreEditor Interactions › Dot toggle works on Bass Staff (Index 1)

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:344:11)

PASS src/__tests__/ScoreAPI.selection.test.tsx
  ● Console

    console.log
      [17:45:12.404] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_c0070c6f', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_a01f5c80',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.417] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_25d4f50a', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_26dd66d0',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.583] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_258a3d94', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_3008dea5',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.602] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_a565e9ca', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_80ddfaa9',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.886] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_38d6c883', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_ee93d184',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.887] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_404a343d', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_31ecc3a1',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.179] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_cdd31c92', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_2b3d01af',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.193] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_f995d17c', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_af3783a3',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.349] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_906bb342', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_373d2431',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.489] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_c46dc3ad', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_44a8cbc3',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.490] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_59aeda0e', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_d3ac2dcb',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.490] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_937a38d2', pitch: 'E4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_20e9c843',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.647] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_f271b622', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_5bd31fa8',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.648] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_d5f21daa', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_177e7c6b',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/ScoreAPI.registry.test.tsx
  ● Console

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:104:24)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.deselectAll (src/hooks/api/selection.ts:152:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:108:29)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:132:9)

    console.log
      [17:45:13.362] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_97d51340', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_e77c966d',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.addNote (src/hooks/api/entry.ts:105:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:138:24)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.addNote (src/hooks/api/entry.ts:127:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:138:24)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:157:9)

    console.log
      [17:45:13.436] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: true,
        note: null,
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_80226eda',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.addRest (src/hooks/api/entry.ts:175:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:158:24)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.addRest (src/hooks/api/entry.ts:198:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:158:24)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:176:9)

    console.log
      [17:45:13.522] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_69aa76b5', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_2d76f04b',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.addNote (src/hooks/api/entry.ts:105:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:177:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.addNote (src/hooks/api/entry.ts:127:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:177:9)

    console.log
      [17:45:13.523] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 0,
        eventId: 'event_2d76f04b',
        note: { id: 'note_a4a243f7', pitch: 'E4', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.addTone (src/hooks/api/entry.ts:225:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:180:24)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.addTone (src/hooks/api/entry.ts:233:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:180:24)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:206:24)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:221:9)

    console.log
      [17:45:13.648] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_92550303', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_0f54e111',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.addNote (src/hooks/api/entry.ts:105:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:221:19)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.addNote (src/hooks/api/entry.ts:127:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:221:19)

    console.log
      [17:45:13.651] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_c952b81b', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_d4380938',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.addNote (src/hooks/api/entry.ts:105:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:221:33)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.addNote (src/hooks/api/entry.ts:127:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:221:33)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:53:9)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:224:24)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.jump (src/hooks/api/navigation.ts:126:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:235:16)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.jump (src/hooks/api/navigation.ts:126:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:236:16)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.jump (src/hooks/api/navigation.ts:126:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:237:16)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.jump (src/hooks/api/navigation.ts:126:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.registry.test.tsx:238:16)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/ScoreAPI.playback.test.tsx
  ● Console

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/ScoreAPI.entry.test.tsx
  ● Console

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.140] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_db3d7eba', pitch: 'C4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_7bec4a56',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.152] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_a5c1677c', pitch: 'D4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_4eec61f5',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.152] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_8436e127', pitch: 'E4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_7080843d',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.270] [INFO] COMMAND: APPLY_TUPLET ApplyTupletCommand {
        measureIndex: 0,
        startEventIndex: 0,
        groupSize: 3,
        ratio: [ 3, 2 ],
        staffIndex: 0,
        type: 'APPLY_TUPLET',
        previousStates: []
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.420] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_eba301b8', pitch: 'C4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_c72650e1',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.421] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_8be1018f', pitch: 'D4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_44bb357c',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.421] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_cae4e3f4', pitch: 'E4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_182aff4a',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.468] [INFO] COMMAND: APPLY_TUPLET ApplyTupletCommand {
        measureIndex: 0,
        startEventIndex: 0,
        groupSize: 3,
        ratio: [ 3, 2 ],
        staffIndex: 0,
        type: 'APPLY_TUPLET',
        previousStates: []
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.552] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_b248b224', pitch: 'C4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_91142652',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.562] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_d76c0dcf', pitch: 'D4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_b60112fe',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.563] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_483162ca', pitch: 'E4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_d781f98f',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.587] [INFO] COMMAND: APPLY_TUPLET ApplyTupletCommand {
        measureIndex: 0,
        startEventIndex: 0,
        groupSize: 3,
        ratio: [ 3, 2 ],
        staffIndex: 0,
        type: 'APPLY_TUPLET',
        previousStates: []
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.658] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_235a94cb', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_7b8195eb',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.800] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_2b598d1b', pitch: 'C4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_4517731d',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.801] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_37a3a2f2', pitch: 'D4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_85377cf8',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.801] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_5d417806', pitch: 'E4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_e337977d',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.870] [INFO] COMMAND: APPLY_TUPLET ApplyTupletCommand {
        measureIndex: 0,
        startEventIndex: 0,
        groupSize: 3,
        ratio: [ 3, 2 ],
        staffIndex: 0,
        type: 'APPLY_TUPLET',
        previousStates: []
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.995] [INFO] COMMAND: REMOVE_TUPLET RemoveTupletCommand {
        measureIndex: 0,
        eventIndex: 0,
        staffIndex: 0,
        type: 'REMOVE_TUPLET',
        previousStates: []
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.195] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_9413ee6a', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_892d53df',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.243] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_892d53df',
        noteId: 'note_9413ee6a',
        updates: { tied: true },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.337] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_892d53df',
        noteId: 'note_9413ee6a',
        updates: { tied: false },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.541] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_10b3b700', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_3c35570b',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.556] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_3c35570b',
        noteId: 'note_10b3b700',
        updates: { tied: true },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.611] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_3c35570b',
        noteId: 'note_10b3b700',
        updates: { tied: false },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/ScoreAPI.navigation.test.tsx
  ● Console

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:131:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:53:9)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:136:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:148:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:53:9)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:152:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:165:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:53:9)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:169:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:178:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:53:9)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:179:24)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:197:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:82:11)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:202:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:213:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:82:11)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:218:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:229:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:82:11)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:233:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:243:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:82:11)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:247:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:259:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.selectById (src/hooks/api/navigation.ts:209:27)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:287:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:82:11)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:291:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:82:11)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:295:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.selectById (src/hooks/api/navigation.ts:209:27)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:304:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:82:11)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:308:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.move (src/hooks/api/navigation.ts:82:11)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:312:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.selectById (src/hooks/api/navigation.ts:209:27)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:321:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.selectById (src/hooks/api/navigation.ts:209:27)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:342:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.selectById (src/hooks/api/navigation.ts:209:27)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:352:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.selectById (src/hooks/api/navigation.ts:209:27)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:379:24)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:397:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.jump (src/hooks/api/navigation.ts:126:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:401:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:412:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.jump (src/hooks/api/navigation.ts:126:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:415:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:428:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.jump (src/hooks/api/navigation.ts:126:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:432:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:443:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at src/hooks/api/useScoreAPI.ts:105:23
      at Object.jump (src/hooks/api/navigation.ts:126:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.navigation.test.tsx:446:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/RenderingDetailed.test.tsx
  ● Console

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/ScoreAPI.customStaves.test.tsx
  ● Console

    console.log
      [17:45:14.646] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_c5054a59', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_3a3b1891',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.813] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_c85470fd', pitch: 'E4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_3348bb7f',
        staffIndex: 2,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/ScoreAPI.cookbook.test.tsx
  ● Console

    console.log
      [17:45:11.922] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_f6d13dfc', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_09fa12ec',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:11.947] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_2398e53d', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_70f8d5f1',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:11.948] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_71a50dca', pitch: 'E4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_7ed7a4d8',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:11.948] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_50b5f514', pitch: 'F4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_b9eaea5d',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.051] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 1,
        isRest: false,
        note: { id: 'note_3e2a9630', pitch: 'G4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_8f4ab360',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.052] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 1,
        isRest: false,
        note: { id: 'note_c9980115', pitch: 'A4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_989601f3',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.052] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 1,
        isRest: false,
        note: { id: 'note_4c879340', pitch: 'B4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_cad4f7bb',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.053] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 1,
        isRest: false,
        note: { id: 'note_703a2247', pitch: 'C5', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_343b89da',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.235] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_8e054867', pitch: 'C4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_46ae05cb',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.236] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_3d7b3130', pitch: 'D4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_be915cc4',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.237] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_3d66841c', pitch: 'E4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_85082b53',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.244] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_2aaf7f79', pitch: 'F4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_2c7d62d5',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.247] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_3841e4e9', pitch: 'G4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_c9bb5114',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.247] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_ccc7bc50', pitch: 'A4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_c47b1c15',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.247] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_828ee52a', pitch: 'B4', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_ad00978e',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.247] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_88b0aaae', pitch: 'C5', accidental: null, tied: false },
        duration: 'eighth',
        isDotted: false,
        index: undefined,
        eventId: 'event_604767e3',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.418] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_db9353ad', pitch: 'C4', accidental: null, tied: false },
        duration: 'half',
        isDotted: false,
        index: undefined,
        eventId: 'event_601466a7',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.418] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 0,
        eventId: 'event_601466a7',
        note: { id: 'note_80549fb6', pitch: 'E4', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.421] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 0,
        eventId: 'event_601466a7',
        note: { id: 'note_b2b96f39', pitch: 'G4', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.422] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_f62768a6', pitch: 'F4', accidental: null, tied: false },
        duration: 'half',
        isDotted: false,
        index: undefined,
        eventId: 'event_e6f99bd7',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.423] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 0,
        eventId: 'event_e6f99bd7',
        note: { id: 'note_ae37e055', pitch: 'A4', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.423] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 0,
        eventId: 'event_e6f99bd7',
        note: { id: 'note_72067549', pitch: 'C5', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.464] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 1,
        isRest: false,
        note: { id: 'note_f39a0b86', pitch: 'G4', accidental: null, tied: false },
        duration: 'half',
        isDotted: false,
        index: undefined,
        eventId: 'event_a176e958',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.466] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 1,
        eventId: 'event_a176e958',
        note: { id: 'note_84ede60a', pitch: 'B4', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.473] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 1,
        eventId: 'event_a176e958',
        note: { id: 'note_63f14688', pitch: 'D5', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.474] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 1,
        isRest: false,
        note: { id: 'note_e8df6f8b', pitch: 'C4', accidental: null, tied: false },
        duration: 'half',
        isDotted: false,
        index: undefined,
        eventId: 'event_249f9785',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.474] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 1,
        eventId: 'event_249f9785',
        note: { id: 'note_e9dab766', pitch: 'E4', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.474] [INFO] COMMAND: ADD_NOTE_TO_EVENT AddNoteToEventCommand {
        measureIndex: 1,
        eventId: 'event_249f9785',
        note: { id: 'note_91de64dc', pitch: 'G4', accidental: null, tied: false },
        staffIndex: 0,
        type: 'ADD_NOTE_TO_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.618] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_1e44ef8c', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_635a77c9',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.619] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: true,
        note: null,
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_10d397e8',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.619] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_3b99cf6e', pitch: 'E4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_461dacb3',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.619] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: true,
        note: null,
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_9c2d1d56',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.824] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_1a30134b', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_8a620734',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.867] [INFO] COMMAND: UPDATE_EVENT UpdateEventCommand {
        measureIndex: 0,
        eventId: 'event_8a620734',
        updates: { duration: 'eighth', dotted: true },
        staffIndex: 0,
        type: 'UPDATE_EVENT',
        previousEvent: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:12.868] [INFO] Committing batch transaction BatchCommand {
        commands: [
          UpdateEventCommand {
            measureIndex: 0,
            eventId: 'event_8a620734',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_EVENT',
            previousEvent: [Object]
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.039] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_e0e27ce0', pitch: 'C4', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_b7488bd6',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.040] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_28259622', pitch: 'C5', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_abbdc95d',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.041] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_db429f56', pitch: 'C6', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_63f78724',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.041] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_572887f9', pitch: 'C4', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_a3742d98',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.041] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_128b7463', pitch: 'C5', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_ebed6e64',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.042] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_c461aeff', pitch: 'C6', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_f48a513a',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.043] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_68331a38', pitch: 'C4', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_12b637eb',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.044] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_d410e453', pitch: 'C5', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_a3402ccf',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.045] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_e48aa5a2', pitch: 'C6', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_640cf666',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.045] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_43472a2c', pitch: 'C4', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_26b0781b',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.046] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_1e00e4a0', pitch: 'C5', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_28fa24eb',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.047] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_ca160c8a', pitch: 'C6', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_dc4aeff6',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.047] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_b729307e', pitch: 'C4', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_e6f83e24',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.047] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_ecdd710f', pitch: 'C5', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_1f1463a9',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.048] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_9dc6f564', pitch: 'C6', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_e83dc82d',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.048] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_5bdede21', pitch: 'C4', accidental: null, tied: false },
        duration: 'sixteenth',
        isDotted: false,
        index: undefined,
        eventId: 'event_d83f622a',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.048] [INFO] Committing batch transaction BatchCommand {
        commands: [
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_b7488bd6',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_abbdc95d',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_63f78724',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_a3742d98',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_ebed6e64',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_f48a513a',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_12b637eb',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_a3402ccf',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_640cf666',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_26b0781b',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_28fa24eb',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_dc4aeff6',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_e6f83e24',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_1f1463a9',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_e83dc82d',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'sixteenth',
            isDotted: false,
            index: undefined,
            eventId: 'event_d83f622a',
            staffIndex: 0,
            type: 'ADD_EVENT'
          }
        ],
        label: 'Add Scale Run',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.236] [INFO] COMMAND: ADD_MEASURE AddMeasureCommand {
        atIndex: undefined,
        type: 'ADD_MEASURE',
        addedMeasureIds: [],
        insertedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.237] [INFO] COMMAND: ADD_MEASURE AddMeasureCommand {
        atIndex: undefined,
        type: 'ADD_MEASURE',
        addedMeasureIds: [],
        insertedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.237] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 2,
        isRest: true,
        note: null,
        duration: 'whole',
        isDotted: false,
        index: undefined,
        eventId: 'event_5bdca8d9',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.397] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_7ed97c66', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_196f0507',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.397] [INFO] Committing batch transaction BatchCommand {
        commands: [
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'quarter',
            isDotted: false,
            index: undefined,
            eventId: 'event_196f0507',
            staffIndex: 0,
            type: 'ADD_EVENT'
          }
        ],
        label: 'Test Batch',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.579] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_dc4e2966', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_edc3eff5',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.276] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_4bf04dfe', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_88ea7411',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.359] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_7371574e', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_44f259df',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.394] [INFO] COMMAND: LOAD_SCORE LoadScoreCommand {
        newScore: {
          title: 'Loaded Score',
          timeSignature: '4/4',
          keySignature: 'G',
          bpm: 100,
          staves: [ [Object] ]
        },
        type: 'LOAD_SCORE',
        previousScore: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.539] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_814d4a46', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_36b8f4b5',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.675] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_1d6d3a3d', pitch: 'C3', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_059fedec',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.676] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_991348df', pitch: 'G4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_ff2fa527',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.915] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_1c87d03d', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_f96e5ac5',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/ScoreAPI.events.test.tsx
  ● Console

    console.log
      [17:45:14.939] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_e694f7a6', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_6cc8af2c',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.004] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_0dbf76b1', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_2a0fd781',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.006] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_d85d3081', pitch: 'E4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_589e354a',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.007] [INFO] Committing batch transaction BatchCommand {
        commands: [
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'quarter',
            isDotted: false,
            index: undefined,
            eventId: 'event_2a0fd781',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'quarter',
            isDotted: false,
            index: undefined,
            eventId: 'event_589e354a',
            staffIndex: 0,
            type: 'ADD_EVENT'
          }
        ],
        label: 'Add Chord',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

PASS src/__tests__/ScoreAPI.reliability.test.tsx
  ● Console

    console.log
      [17:45:14.780] [INFO] COMMAND: ADD_MEASURE AddMeasureCommand {
        atIndex: undefined,
        type: 'ADD_MEASURE',
        addedMeasureIds: [],
        insertedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.addMeasure (src/hooks/api/modification.ts:156:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.reliability.test.tsx:39:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.reliability.test.tsx:54:9)

    console.log
      [17:45:14.895] [INFO] COMMAND: CHANGE_PITCH ChangePitchCommand {
        measureIndex: 0,
        eventId: 'e0',
        noteId: 'n0',
        newPitch: 'D4',
        staffIndex: 0,
        type: 'CHANGE_PITCH',
        oldPitch: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.setPitch (src/hooks/api/modification.ts:67:9)
      at Object.<anonymous> (src/__tests__/ScoreAPI.reliability.test.tsx:57:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

       95 |
       96 |   private notifyListeners(): void {
    >  97 |     this.listeners.forEach((listener) => listener(this.state));
          |                                          ^
       98 |   }
       99 | }
      100 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/engines/SelectionEngine.ts:97:42
          at Set.forEach (<anonymous>)
      at SelectionEngine.notifyListeners (src/engines/SelectionEngine.ts:97:20)
      at SelectionEngine.dispatch (src/engines/SelectionEngine.ts:72:10)
      at Object.select (src/hooks/api/navigation.ts:145:23)
      at Object.<anonymous> (src/__tests__/ScoreAPI.reliability.test.tsx:71:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:15.248] [INFO] COMMAND: ADD_MEASURE AddMeasureCommand {
        atIndex: 999,
        type: 'ADD_MEASURE',
        addedMeasureIds: [],
        insertedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      13 |     // Subscribe to engine changes
      14 |     const unsubscribe = engine.subscribe((newScore) => {
    > 15 |       setScore(newScore);
         |       ^
      16 |     });
      17 |
      18 |     return () => {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at src/hooks/score/useScoreEngine.ts:15:7
      at src/engines/ScoreEngine.ts:127:42
          at Set.forEach (<anonymous>)
      at ScoreEngine.notifyListeners (src/engines/ScoreEngine.ts:127:20)
      at ScoreEngine.setState (src/engines/ScoreEngine.ts:40:10)
      at ScoreEngine.dispatch (src/engines/ScoreEngine.ts:61:12)
      at src/hooks/score/useTransactionBatching.ts:46:16
      at Object.addMeasure (src/hooks/api/modification.ts:156:7)
      at Object.<anonymous> (src/__tests__/ScoreAPI.reliability.test.tsx:98:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/useFontLoaded.test.ts
PASS src/__tests__/useTupletActions.test.ts
  ● Console

    console.warn
      Score not initialized

      22 |     (ratio: [number, number], groupSize: number) => {
      23 |       if (!scoreRef.current) {
    > 24 |         console.warn('Score not initialized');
         |                 ^
      25 |         return false;
      26 |       }
      27 |

      at Object.applyTuplet (src/hooks/useTupletActions.ts:24:17)
      at src/__tests__/useTupletActions.test.ts:76:40
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/useTupletActions.test.ts:75:10)

    console.warn
      No event selected for tuplet application

      27 |
      28 |       if (selection.measureIndex === null || selection.eventId === null) {
    > 29 |         console.warn('No event selected for tuplet application');
         |                 ^
      30 |         return false;
      31 |       }
      32 |

      at Object.applyTuplet (src/hooks/useTupletActions.ts:29:17)
      at src/__tests__/useTupletActions.test.ts:93:40
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/useTupletActions.test.ts:92:10)

    console.warn
      Not enough events for tuplet (need 3, have 2)

      51 |       // Validate that we have enough events for the tuplet
      52 |       if (eventIndex + groupSize > measure.events.length) {
    > 53 |         console.warn(
         |                 ^
      54 |           `Not enough events for tuplet (need ${groupSize}, have ${measure.events.length - eventIndex})`
      55 |         );
      56 |         return false;

      at Object.applyTuplet (src/hooks/useTupletActions.ts:53:17)
      at src/__tests__/useTupletActions.test.ts:108:40
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/useTupletActions.test.ts:107:10)

    console.warn
      Selected event not found in measure

      45 |
      46 |       if (eventIndex === -1) {
    > 47 |         console.warn('Selected event not found in measure');
         |                 ^
      48 |         return false;
      49 |       }
      50 |

      at Object.applyTuplet (src/hooks/useTupletActions.ts:47:17)
      at src/__tests__/useTupletActions.test.ts:125:40
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/useTupletActions.test.ts:124:10)

    console.warn
      Selected event is not part of a tuplet

      102 |     const event = measure.events[eventIndex];
      103 |     if (!event.tuplet) {
    > 104 |       console.warn('Selected event is not part of a tuplet');
          |               ^
      105 |       return false;
      106 |     }
      107 |

      at Object.removeTuplet (src/hooks/useTupletActions.ts:104:15)
      at src/__tests__/useTupletActions.test.ts:188:40
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/useTupletActions.test.ts:187:10)

    console.warn
      Score not initialized

      72 |   const removeTuplet = useCallback(() => {
      73 |     if (!scoreRef.current) {
    > 74 |       console.warn('Score not initialized');
         |               ^
      75 |       return false;
      76 |     }
      77 |

      at Object.removeTuplet (src/hooks/useTupletActions.ts:74:15)
      at src/__tests__/useTupletActions.test.ts:203:40
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/useTupletActions.test.ts:202:10)

PASS src/__tests__/usePlayback.test.ts
PASS src/__tests__/ScoreAPI.modification.test.tsx (5.185 s)
  ● Console

    console.log
      [17:45:11.979] [INFO] COMMAND: LOAD_SCORE LoadScoreCommand {
        newScore: {
          title: 'New Score',
          staves: [ [Object] ],
          timeSignature: '4/4',
          keySignature: 'C',
          bpm: 100
        },
        type: 'LOAD_SCORE',
        previousScore: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.439] [INFO] COMMAND: ADD_MEASURE AddMeasureCommand {
        atIndex: undefined,
        type: 'ADD_MEASURE',
        addedMeasureIds: [],
        insertedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.440] [INFO] COMMAND: ADD_MEASURE AddMeasureCommand {
        atIndex: undefined,
        type: 'ADD_MEASURE',
        addedMeasureIds: [],
        insertedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.493] [INFO] COMMAND: DELETE_MEASURE DeleteMeasureCommand {
        index: 0,
        type: 'DELETE_MEASURE',
        deletedMeasures: [],
        deletedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.593] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_d512a336', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_c7009b96',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.663] [INFO] COMMAND: DELETE_NOTE DeleteNoteCommand {
        measureIndex: 0,
        eventId: 'event_c7009b96',
        noteId: 'note_d512a336',
        staffIndex: 0,
        type: 'DELETE_NOTE',
        deletedEventIndex: -1,
        deletedEvent: null,
        deletedNote: null,
        wasLastNoteInEvent: false
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:12.812] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: true,
        note: null,
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_cb332cef',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.813] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: true,
        note: null,
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_797f3d9e',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:12.997] [INFO] COMMAND: DELETE_NOTE DeleteNoteCommand {
        measureIndex: 0,
        eventId: 'event_cb332cef',
        noteId: 'event_cb332cef-rest',
        staffIndex: 0,
        type: 'DELETE_NOTE',
        deletedEventIndex: -1,
        deletedEvent: null,
        deletedNote: null,
        wasLastNoteInEvent: false
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.117] [INFO] COMMAND: SET_CLEF SetClefCommand {
        targetClef: 'bass',
        staffIndex: 0,
        type: 'SET_CLEF',
        previousClef: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:13.168] [INFO] COMMAND: SET_CLEF SetClefCommand {
        targetClef: 'alto',
        staffIndex: 0,
        type: 'SET_CLEF',
        previousClef: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:13.213] [INFO] COMMAND: SET_CLEF SetClefCommand {
        targetClef: 'tenor',
        staffIndex: 0,
        type: 'SET_CLEF',
        previousClef: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:13.256] [INFO] COMMAND: SET_CLEF SetClefCommand {
        targetClef: 'treble',
        staffIndex: 0,
        type: 'SET_CLEF',
        previousClef: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.336] [INFO] COMMAND: SET_SINGLE_STAFF SetSingleStaffCommand {
        targetClef: 'treble',
        type: 'SET_SINGLE_STAFF',
        previousStaves: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:13.362] [INFO] COMMAND: SET_GRAND_STAFF SetGrandStaffCommand { type: 'SET_GRAND_STAFF', previousStaves: null }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.532] [INFO] COMMAND: SET_KEY_SIGNATURE SetKeySignatureCommand {
        newSignature: 'G',
        type: 'SET_KEY_SIGNATURE',
        previousKeySignature: null,
        previousStaves: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.592] [INFO] COMMAND: SET_TIME_SIGNATURE SetTimeSignatureCommand {
        newSignature: '3/4',
        type: 'SET_TIME_SIGNATURE',
        previousTimeSignature: null,
        previousStaves: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:13.666] [INFO] COMMAND: UPDATE_TITLE UpdateTitleCommand {
        newTitle: 'My Song',
        type: 'UPDATE_TITLE',
        previousTitle: ''
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.091] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_e3330de4', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_f232fd0a',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.161] [INFO] COMMAND: TRANSPOSE_SELECTION TransposeSelectionCommand {
        selection: {
          staffIndex: 0,
          measureIndex: 0,
          eventId: 'event_f232fd0a',
          noteId: 'note_e3330de4',
          selectedNotes: [ [Object] ],
          anchor: null
        },
        semitones: 2,
        keySignature: 'C',
        type: 'TRANSPOSE_SELECTION'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.215] [INFO] COMMAND: TRANSPOSE_SELECTION TransposeSelectionCommand {
        selection: {
          staffIndex: 0,
          measureIndex: 0,
          eventId: 'event_f232fd0a',
          noteId: 'note_e3330de4',
          selectedNotes: [ [Object] ],
          anchor: null
        },
        semitones: -1,
        keySignature: 'C',
        type: 'TRANSPOSE_SELECTION'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.401] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: true,
        note: null,
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_2b5283c9',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.506] [INFO] COMMAND: UPDATE_EVENT UpdateEventCommand {
        measureIndex: 0,
        eventId: 'event_2b5283c9',
        updates: { duration: 'half' },
        staffIndex: 0,
        type: 'UPDATE_EVENT',
        previousEvent: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.560] [INFO] COMMAND: TOGGLE_PICKUP TogglePickupCommand { type: 'TOGGLE_PICKUP' }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.574] [INFO] COMMAND: TOGGLE_PICKUP TogglePickupCommand { type: 'TOGGLE_PICKUP' }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.623] [INFO] COMMAND: LOAD_SCORE LoadScoreCommand {
        newScore: {
          title: 'New Score',
          timeSignature: '4/4',
          keySignature: 'C',
          bpm: 120,
          staves: [ [Object], [Object] ]
        },
        type: 'LOAD_SCORE',
        previousScore: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.645] [INFO] COMMAND: SET_GRAND_STAFF SetGrandStaffCommand { type: 'SET_GRAND_STAFF', previousStaves: null }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.646] [INFO] COMMAND: SET_SINGLE_STAFF SetSingleStaffCommand {
        targetClef: 'treble',
        type: 'SET_SINGLE_STAFF',
        previousStaves: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.715] [INFO] COMMAND: DELETE_MEASURE DeleteMeasureCommand {
        index: 999,
        type: 'DELETE_MEASURE',
        deletedMeasures: [],
        deletedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.902] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_5f3196c8', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_3711f836',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.033] [INFO] COMMAND: TRANSPOSE_SELECTION TransposeSelectionCommand {
        selection: {
          staffIndex: 0,
          measureIndex: 0,
          eventId: null,
          noteId: null,
          selectedNotes: [],
          anchor: null
        },
        semitones: 8,
        keySignature: 'C',
        type: 'TRANSPOSE_SELECTION'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:15.218] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_b33b281f', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_c49db9bf',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.252] [INFO] COMMAND: SET_CLEF SetClefCommand {
        targetClef: 'bass',
        staffIndex: 0,
        type: 'SET_CLEF',
        previousClef: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:15.375] [INFO] COMMAND: SET_GRAND_STAFF SetGrandStaffCommand { type: 'SET_GRAND_STAFF', previousStaves: null }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.377] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_49b7aab2', pitch: 'C3', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_aed5274f',
        staffIndex: 1,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.458] [INFO] COMMAND: SET_SINGLE_STAFF SetSingleStaffCommand {
        targetClef: 'treble',
        type: 'SET_SINGLE_STAFF',
        previousStaves: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.480] [INFO] COMMAND: SET_GRAND_STAFF SetGrandStaffCommand { type: 'SET_GRAND_STAFF', previousStaves: null }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/useSelection.test.tsx
PASS src/__tests__/ScoreCanvas.test.tsx
PASS src/__tests__/MusicService.test.ts
PASS src/__tests__/ScoreAPI.accidental.test.tsx
  ● Console

    console.log
      [17:45:14.423] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_a81f3d69', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_419a9291',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.456] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_419a9291',
        noteId: 'note_a81f3d69',
        updates: { accidental: 'sharp' },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:14.457] [INFO] Committing batch transaction BatchCommand {
        commands: [
          UpdateNoteCommand {
            measureIndex: 0,
            eventId: 'event_419a9291',
            noteId: 'note_a81f3d69',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_NOTE',
            previousNote: [Object]
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.563] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_419a9291',
        noteId: 'note_a81f3d69',
        updates: { accidental: 'flat' },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:14.563] [INFO] Committing batch transaction BatchCommand {
        commands: [
          UpdateNoteCommand {
            measureIndex: 0,
            eventId: 'event_419a9291',
            noteId: 'note_a81f3d69',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_NOTE',
            previousNote: [Object]
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.687] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_414e970a', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_12157db1',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.689] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_8c128c0a', pitch: 'D4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_d2f81114',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.894] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_12157db1',
        noteId: 'note_414e970a',
        updates: { accidental: 'sharp' },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:14.894] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_d2f81114',
        noteId: 'note_8c128c0a',
        updates: { accidental: 'sharp' },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:14.895] [INFO] Committing batch transaction BatchCommand {
        commands: [
          UpdateNoteCommand {
            measureIndex: 0,
            eventId: 'event_12157db1',
            noteId: 'note_414e970a',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_NOTE',
            previousNote: [Object]
          },
          UpdateNoteCommand {
            measureIndex: 0,
            eventId: 'event_d2f81114',
            noteId: 'note_8c128c0a',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_NOTE',
            previousNote: [Object]
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:15.173] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_401be218', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_e0369f97',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.212] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_e0369f97',
        noteId: 'note_401be218',
        updates: { accidental: 'sharp' },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:15.215] [INFO] Committing batch transaction BatchCommand {
        commands: [
          UpdateNoteCommand {
            measureIndex: 0,
            eventId: 'event_e0369f97',
            noteId: 'note_401be218',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_NOTE',
            previousNote: [Object]
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.264] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_e0369f97',
        noteId: 'note_401be218',
        updates: { accidental: 'flat' },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:15.265] [INFO] Committing batch transaction BatchCommand {
        commands: [
          UpdateNoteCommand {
            measureIndex: 0,
            eventId: 'event_e0369f97',
            noteId: 'note_401be218',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_NOTE',
            previousNote: [Object]
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.348] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_e0369f97',
        noteId: 'note_401be218',
        updates: { accidental: 'natural' },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:15.349] [INFO] Committing batch transaction BatchCommand {
        commands: [
          UpdateNoteCommand {
            measureIndex: 0,
            eventId: 'event_e0369f97',
            noteId: 'note_401be218',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_NOTE',
            previousNote: [Object]
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:15.434] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_e0369f97',
        noteId: 'note_401be218',
        updates: { accidental: null },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:15.435] [INFO] Committing batch transaction BatchCommand {
        commands: [
          UpdateNoteCommand {
            measureIndex: 0,
            eventId: 'event_e0369f97',
            noteId: 'note_401be218',
            updates: [Object],
            staffIndex: 0,
            type: 'UPDATE_NOTE',
            previousNote: [Object]
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/CrossStaffNavigation.test.tsx
PASS src/__tests__/ScoreAPI.config.test.tsx
  ● Console

    console.log
      [17:45:14.614] [INFO] COMMAND: SET_BPM SetBpmCommand { bpm: 140, type: 'SET_BPM' }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.warn
      [17:45:14.680] [WARN] BPM 9999 too high, clamped to 300

      38 |         break;
      39 |       case LogLevel.WARN:
    > 40 |         console.warn(prefix, message, data || '');
         |                 ^
      41 |         break;
      42 |       case LogLevel.DEBUG:
      43 |         console.debug(prefix, message, data || '');

      at DebugLogger.log (src/utils/debug.ts:40:17)
      at clampBpm (src/utils/validation.ts:73:12)
      at Object.setBpm (src/hooks/api/modification.ts:321:31)
      at src/__tests__/ScoreAPI.config.test.tsx:60:13
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/ScoreAPI.config.test.tsx:59:10)

    console.log
      [17:45:14.682] [INFO] COMMAND: SET_BPM SetBpmCommand { bpm: 300, type: 'SET_BPM' }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.warn
      [17:45:14.683] [WARN] BPM -50 too low, clamped to 30

      38 |         break;
      39 |       case LogLevel.WARN:
    > 40 |         console.warn(prefix, message, data || '');
         |                 ^
      41 |         break;
      42 |       case LogLevel.DEBUG:
      43 |         console.debug(prefix, message, data || '');

      at DebugLogger.log (src/utils/debug.ts:40:17)
      at clampBpm (src/utils/validation.ts:69:12)
      at Object.setBpm (src/hooks/api/modification.ts:321:31)
      at src/__tests__/ScoreAPI.config.test.tsx:65:13
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/ScoreAPI.config.test.tsx:64:10)

    console.log
      [17:45:14.683] [INFO] COMMAND: SET_BPM SetBpmCommand { bpm: 30, type: 'SET_BPM' }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.log
      [17:45:14.827] [INFO] COMMAND: UPDATE_TITLE UpdateTitleCommand {
        newTitle: 'Modified',
        type: 'UPDATE_TITLE',
        previousTitle: ''
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.828] [INFO] COMMAND: SET_BPM SetBpmCommand { bpm: 150, type: 'SET_BPM' }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.829] [INFO] COMMAND: ADD_MEASURE AddMeasureCommand {
        atIndex: undefined,
        type: 'ADD_MEASURE',
        addedMeasureIds: [],
        insertedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:14.880] [INFO] COMMAND: LOAD_SCORE LoadScoreCommand {
        newScore: {
          title: 'New Score',
          timeSignature: '4/4',
          keySignature: 'C',
          bpm: 120,
          staves: [ [Object], [Object] ]
        },
        type: 'LOAD_SCORE',
        previousScore: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

    console.error
      An update to ScoreEditorContent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      51 |       const { inputs, access, error } = await requestMIDIAccess();
      52 |       if (error) {
    > 53 |         setMidiStatus({ connected: false, deviceName: null, error });
         |         ^
      54 |         return;
      55 |       }
      56 |       if (inputs.length === 0) {

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at initMIDI (src/hooks/audio/useMIDI.ts:53:9)

PASS src/__tests__/mergeConfig.test.ts
PASS src/__tests__/exporters/musicXmlExporter.test.ts
PASS src/__tests__/ExtendSelectionVertically.test.ts
PASS src/__tests__/hooks/note/useNotePitch.test.tsx
PASS src/__tests__/useEditorMode.test.tsx
PASS src/__tests__/TupletCommands.test.ts
PASS src/__tests__/ScoreAPI.transactions.test.tsx
  ● Console

    console.log
      [17:45:15.996] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_502a7b16', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_8ea54cc8',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.010] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_16fb8237', pitch: 'E4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_59b95092',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.012] [INFO] Committing batch transaction BatchCommand {
        commands: [
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'quarter',
            isDotted: false,
            index: undefined,
            eventId: 'event_8ea54cc8',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'quarter',
            isDotted: false,
            index: undefined,
            eventId: 'event_59b95092',
            staffIndex: 0,
            type: 'ADD_EVENT'
          }
        ],
        label: 'Add Chord',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.021] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_6d0f9437', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_fe5017cb',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.023] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_b6adcb62', pitch: 'E4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_98d7f5ea',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.025] [INFO] Committing batch transaction BatchCommand {
        commands: [
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'quarter',
            isDotted: false,
            index: undefined,
            eventId: 'event_fe5017cb',
            staffIndex: 0,
            type: 'ADD_EVENT'
          },
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'quarter',
            isDotted: false,
            index: undefined,
            eventId: 'event_98d7f5ea',
            staffIndex: 0,
            type: 'ADD_EVENT'
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.033] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_e599e2f0', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_5e9547c6',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.036] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_8f9d496e', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_82388e03',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.037] [INFO] Committing batch transaction BatchCommand {
        commands: [
          AddEventCommand {
            measureIndex: 0,
            isRest: false,
            note: [Object],
            duration: 'quarter',
            isDotted: false,
            index: undefined,
            eventId: 'event_82388e03',
            staffIndex: 0,
            type: 'ADD_EVENT'
          }
        ],
        label: 'Batch Action',
        type: 'BATCH'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.warn
      [RiffScore] commitTransaction called with no active transaction

      66 |     (label?: string) => {
      67 |       if (depthRef.current === 0) {
    > 68 |         console.warn('[RiffScore] commitTransaction called with no active transaction');
         |                 ^
      69 |         return;
      70 |       }
      71 |

      at src/hooks/score/useTransactionBatching.ts:68:17
      at Object.commitTransaction (src/hooks/api/history.ts:59:7)
      at src/__tests__/ScoreAPI.transactions.test.tsx:148:22
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:814:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/__tests__/ScoreAPI.transactions.test.tsx:147:8)

PASS src/__tests__/useScoreLogic.test.tsx
  ● Console

    console.log
      [17:45:15.992] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_b62ffd98', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_e6d3d8e9',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.004] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_faf45d38', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_1abce341',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.012] [INFO] COMMAND: DELETE_NOTE DeleteNoteCommand {
        measureIndex: 0,
        eventId: 'event_1abce341',
        noteId: 'note_faf45d38',
        staffIndex: 0,
        type: 'DELETE_NOTE',
        deletedEventIndex: -1,
        deletedEvent: null,
        deletedNote: null,
        wasLastNoteInEvent: false
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:16.019] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_20955ea7', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_f9ce46ee',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.022] [INFO] COMMAND: UPDATE_EVENT UpdateEventCommand {
        measureIndex: 0,
        eventId: 'event_f9ce46ee',
        updates: { duration: 'eighth' },
        staffIndex: 0,
        type: 'UPDATE_EVENT',
        previousEvent: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

    console.log
      [17:45:16.074] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'note_173a4b56', pitch: 'C4', accidental: null, tied: false },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: 'event_dbe00e42',
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.088] [INFO] COMMAND: UPDATE_NOTE UpdateNoteCommand {
        measureIndex: 0,
        eventId: 'event_dbe00e42',
        noteId: 'note_173a4b56',
        updates: { pitch: 'C#4' },
        staffIndex: 0,
        type: 'UPDATE_NOTE',
        previousNote: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)
          at Array.forEach (<anonymous>)

PASS src/__tests__/engines/layout/scoreLayout.test.ts
PASS src/__tests__/TimelineService.test.ts
PASS src/__tests__/exporters/abcExporter.test.ts
PASS src/__tests__/SelectAllCommand.edge.test.ts
PASS src/__tests__/hooks/layout/useCursorLayout.test.ts
PASS src/__tests__/SelectAllCommand.expansion.test.ts
PASS src/__tests__/measure.test.ts
PASS src/__tests__/interactionUtils.test.ts
PASS src/__tests__/utils/entry/notePayload.test.ts
PASS src/__tests__/SelectionNavigation.test.ts
PASS src/__tests__/ChangePitchCommand.test.ts
PASS src/__tests__/utils/entry/pitchResolver.test.ts
PASS src/__tests__/core.test.ts
PASS src/__tests__/ChangePitchTuplet.test.ts
  ● Console

    console.log
      [17:45:16.707] [INFO] COMMAND: APPLY_TUPLET ApplyTupletCommand {
        measureIndex: 0,
        startEventIndex: 0,
        groupSize: 3,
        ratio: [ 3, 2 ],
        staffIndex: 0,
        type: 'APPLY_TUPLET',
        previousStates: []
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:16.713] [INFO] COMMAND: CHANGE_PITCH ChangePitchCommand {
        measureIndex: 0,
        eventId: 'e2',
        noteId: 'n2',
        newPitch: 'G4',
        staffIndex: 0,
        type: 'CHANGE_PITCH',
        oldPitch: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

PASS src/__tests__/grandStaffAlignment.test.ts
PASS src/__tests__/BassSelection.test.tsx
PASS src/__tests__/handlePlayback.test.ts
PASS src/__tests__/handleMutation.test.ts
PASS src/__tests__/navigationHelpers.test.ts
PASS src/__tests__/ToggleRestCommand.test.ts
PASS src/__tests__/grandStaffBassTransposition.test.ts
  ● Console

    console.log
      [17:45:17.123] [INFO] COMMAND: SET_GRAND_STAFF SetGrandStaffCommand { type: 'SET_GRAND_STAFF', previousStaves: null }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.130] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { pitch: 'E3', id: 'test-note-bass' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 1,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.133] [INFO] COMMAND: TRANSPOSE_SELECTION TransposeSelectionCommand {
        selection: {
          staffIndex: 1,
          measureIndex: 0,
          eventId: 'event_f02137e5',
          noteId: 'test-note-bass',
          selectedNotes: []
        },
        semitones: 1,
        keySignature: 'C',
        type: 'TRANSPOSE_SELECTION'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.137] [INFO] COMMAND: SET_GRAND_STAFF SetGrandStaffCommand { type: 'SET_GRAND_STAFF', previousStaves: null }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.139] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { pitch: 'C5', id: 'treble-note' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.139] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { pitch: 'C3', id: 'bass-note' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 1,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.141] [INFO] COMMAND: TRANSPOSE_SELECTION TransposeSelectionCommand {
        selection: {
          staffIndex: 1,
          measureIndex: 0,
          eventId: 'event_67e37d28',
          noteId: 'bass-note',
          selectedNotes: []
        },
        semitones: 1,
        keySignature: 'C',
        type: 'TRANSPOSE_SELECTION'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.145] [INFO] COMMAND: SET_GRAND_STAFF SetGrandStaffCommand { type: 'SET_GRAND_STAFF', previousStaves: null }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.177] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { pitch: 'G3', id: 'bass-undo-note' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 1,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:17.178] [INFO] COMMAND: TRANSPOSE_SELECTION TransposeSelectionCommand {
        selection: {
          staffIndex: 1,
          measureIndex: 0,
          eventId: 'event_5aa5f5d7',
          noteId: 'bass-undo-note',
          selectedNotes: []
        },
        semitones: -7,
        keySignature: 'C',
        type: 'TRANSPOSE_SELECTION'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

PASS src/__tests__/SelectFullEventsCommand.test.ts
PASS src/__tests__/SetGrandStaffCommand.test.ts
PASS src/__tests__/layoutEngine.test.ts
PASS src/__tests__/hooks/note/useNoteDelete.test.tsx
PASS src/__tests__/ExtendSelectionHorizontally.test.ts
PASS src/__tests__/handleNavigation.test.ts
PASS src/__tests__/verticalStack.test.ts
PASS src/__tests__/TogglePickupCommand.test.ts
PASS src/__tests__/SelectEventCommand.test.ts
PASS src/__tests__/MeasureCommands.test.ts
PASS src/__tests__/AnchorSelection.test.tsx
PASS src/__tests__/ChromaticTransposeCommand.test.ts
PASS src/__tests__/utils/entry/previewNote.test.ts
PASS src/__tests__/SelectionEngine.test.ts
PASS src/__tests__/SelectMeasureCommand.test.ts
PASS src/__tests__/keyboardNavigation.test.ts
  ● Console

    console.log
      [17:45:18.192] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { pitch: 'C5', id: 'note-1' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.199] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { pitch: 'D5', id: 'note-2' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.225] [INFO] COMMAND: SET_GRAND_STAFF SetGrandStaffCommand { type: 'SET_GRAND_STAFF', previousStaves: null }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.225] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { pitch: 'C3', id: 'bass-1' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 1,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.226] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { pitch: 'D3', id: 'bass-2' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 1,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

PASS src/__tests__/ScoreEngine.test.ts
  ● Console

    console.log
      [17:45:18.190] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'test-note', pitch: 'C4' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.197] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'test-note', pitch: 'C4' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.201] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'test-note', pitch: 'C4' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.220] [INFO] COMMAND: DELETE_NOTE DeleteNoteCommand {
        measureIndex: 0,
        eventId: 'event_2ea69c75',
        noteId: 'test-note',
        staffIndex: 0,
        type: 'DELETE_NOTE',
        deletedEventIndex: -1,
        deletedEvent: null,
        deletedNote: null,
        wasLastNoteInEvent: false
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.227] [INFO] COMMAND: ADD_EVENT AddEventCommand {
        measureIndex: 0,
        isRest: false,
        note: { id: 'test-note', pitch: 'C4' },
        duration: 'quarter',
        isDotted: false,
        index: undefined,
        eventId: undefined,
        staffIndex: 0,
        type: 'ADD_EVENT'
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.228] [INFO] COMMAND: CHANGE_PITCH ChangePitchCommand {
        measureIndex: 0,
        eventId: 'event_94e580fe',
        noteId: 'test-note',
        newPitch: 'D4',
        staffIndex: 0,
        type: 'CHANGE_PITCH',
        oldPitch: null
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.240] [INFO] COMMAND: ADD_MEASURE AddMeasureCommand {
        atIndex: undefined,
        type: 'ADD_MEASURE',
        addedMeasureIds: [],
        insertedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

    console.log
      [17:45:18.242] [INFO] COMMAND: DELETE_MEASURE DeleteMeasureCommand {
        index: undefined,
        type: 'DELETE_MEASURE',
        deletedMeasures: [],
        deletedIndex: -1
      }

      at DebugLogger.log (src/utils/debug.ts:46:17)

PASS src/__tests__/commands/SelectAllInMeasureCommand.test.ts
PASS src/__tests__/validation.test.ts
  ● Console

    console.warn
      [17:45:18.278] [WARN] BPM 10 too low, clamped to 30

      38 |         break;
      39 |       case LogLevel.WARN:
    > 40 |         console.warn(prefix, message, data || '');
         |                 ^
      41 |         break;
      42 |       case LogLevel.DEBUG:
      43 |         console.debug(prefix, message, data || '');

      at DebugLogger.log (src/utils/debug.ts:40:17)
      at clampBpm (src/utils/validation.ts:69:12)
      at Object.<anonymous> (src/__tests__/validation.test.ts:51:22)

    console.warn
      [17:45:18.297] [WARN] BPM 400 too high, clamped to 300

      38 |         break;
      39 |       case LogLevel.WARN:
    > 40 |         console.warn(prefix, message, data || '');
         |                 ^
      41 |         break;
      42 |       case LogLevel.DEBUG:
      43 |         console.debug(prefix, message, data || '');

      at DebugLogger.log (src/utils/debug.ts:40:17)
      at clampBpm (src/utils/validation.ts:73:12)
      at Object.<anonymous> (src/__tests__/validation.test.ts:55:22)

    console.warn
      [17:45:18.301] [WARN] Invalid BPM value "abc", defaulting to 120

      38 |         break;
      39 |       case LogLevel.WARN:
    > 40 |         console.warn(prefix, message, data || '');
         |                 ^
      41 |         break;
      42 |       case LogLevel.DEBUG:
      43 |         console.debug(prefix, message, data || '');

      at DebugLogger.log (src/utils/debug.ts:40:17)
      at clampBpm (src/utils/validation.ts:64:12)
      at Object.<anonymous> (src/__tests__/validation.test.ts:63:22)

PASS src/__tests__/SetClefCommand.test.ts
PASS src/__tests__/SelectAllCommand.scope.test.ts
PASS src/__tests__/SelectionLogic.test.tsx
PASS src/__tests__/NavigateCommand.test.ts
PASS src/__tests__/generateScore.test.ts
PASS src/__tests__/SetSingleStaffCommand.test.ts

Summary of all failing tests
FAIL src/__tests__/MultiSelect.test.tsx
  ● Multi-Note Selection Integration › Cmd+Click selects multiple notes

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/MultiSelect.test.tsx:85:11)

  ● Multi-Note Selection Integration › Add Note -> Cmd+Click -> Transpose flow

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/MultiSelect.test.tsx:120:11)

FAIL src/__tests__/Smoke.test.tsx
  ● ScoreEditor Smoke Test › renders without crashing and handles clef clicks

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Smoke.test.tsx:63:11)

FAIL src/__tests__/Interaction.test.tsx
  ● ScoreEditor Interactions › User can add a note by clicking on a measure

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:62:11)

  ● ScoreEditor Interactions › User can insert a note between existing notes

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:108:11)

  ● ScoreEditor Interactions › User can delete a selected note

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:146:11)

  ● ScoreEditor Interactions › Cursor auto-advances after APPENDing a note

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:200:11)

  ● ScoreEditor Interactions › Cursor does NOT auto-advance after INSERTing a note

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:237:11)

  ● ScoreEditor Interactions › User can multi-select notes with CMD+Click

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:267:11)

  ● ScoreEditor Interactions › Dot toggle works on Bass Staff (Index 1)

    TypeError: exitPlaybackMode is not a function

      170 |   const { exitPlaybackMode } = playback;
      171 |   React.useEffect(() => {
    > 172 |     exitPlaybackMode();
          |     ^
      173 |   }, [selection, exitPlaybackMode]);
      174 |
      175 |   // --- Render ---

      at src/components/Layout/ScoreEditor.tsx:172:5
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15718:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/Interaction.test.tsx:344:11)


Test Suites: 3 failed, 74 passed, 77 total
Tests:       10 failed, 5 skipped, 800 passed, 815 total
Snapshots:   0 total
Time:        10.343 s
Ran all test suites.
